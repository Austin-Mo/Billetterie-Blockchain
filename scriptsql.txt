--
-- Utilisation de la base de données :
--


USE bdd_project_manager;

--
-- Effacer les tables :
--

DROP TABLE isinscrit;
DROP TABLE utilisateur;
DROP TABLE projet;


--
-- Création des tables :
--

CREATE TABLE utilisateur ( 
    id  INT (3) UNSIGNED NOT NULL AUTO_INCREMENT,
    firstname  VARCHAR(50) NOT NULL,
    lastname  VARCHAR(50) NOT NULL,
    username  VARCHAR(50) NOT NULL,
    email VARCHAR (50) NOT NULL,
    mdp VARCHAR (150) NOT NULL,
    is_admin TINYINT(1) NOT NULL DEFAULT '0',
    is_prof TINYINT(1) NOT NULL DEFAULT '0',
    PRIMARY KEY (id)
)ENGINE=INNODB;


CREATE TABLE projet (
	id  INT(3) UNSIGNED NOT NULL AUTO_INCREMENT,
	titre  VARCHAR(50) NOT NULL,
	description  VARCHAR(50) NOT NULL,
	nb_place_total  INT(7),
	lien_pdf  VARCHAR(50) NOT NULL,
	PRIMARY KEY (id)
)ENGINE=INNODB;


CREATE TABLE isinscrit (
	id_utilisateur  INT(3) UNSIGNED NOT NULL,
	id_projet  INT(3) UNSIGNED NOT NULL,
	CONSTRAINT fk_isInscrit_utilisateur FOREIGN KEY (id_utilisateur) REFERENCES utilisateur(id) ON DELETE CASCADE,
	CONSTRAINT fk_isInscrit_projet FOREIGN KEY (id_projet) REFERENCES projet(id) ON DELETE CASCADE
)ENGINE=INNODB;


-- DATA

INSERT INTO utilisateur (firstname, lastname, username, email, mdp, is_admin, is_prof) VALUES ("paul","bertrand","paul.bertrand","paul.bertrand@groupe-esigelec.org","0003",0,0);
INSERT INTO utilisateur (firstname, lastname, username, email, mdp, is_admin, is_prof) VALUES ("chloe","cabot","chloe.cabot","cabot@esigelec.fr","0000",0,1);
INSERT INTO utilisateur (firstname, lastname, username, email, mdp, is_admin, is_prof) VALUES ("christophe","berquez","christophe.berquez","christophe.berquez@esigelec.fr","0001",1,0);
INSERT INTO utilisateur (firstname, lastname, username, email, mdp, is_admin, is_prof) VALUES ("etienne","chatreaux","etienne.chatreaux","etienne.chatreaux@groupe-esigelec.org","0002",0,0);

INSERT INTO projet (titre, description, nb_place_total, lien_pdf) VALUES ("PING 48.1", "Le ping 48.1 regroupe 3 élèves pur l'instant...", 6,"pdfs/nom_du_fichier.pdf");
INSERT INTO projet (titre, description, nb_place_total, lien_pdf) VALUES ("PING 48.2", "Le ping 48.2 regroupe 3 élèves pur l'instant...", 6,"pdfs/nom_du_fichier.pdf");
INSERT INTO projet (titre, description, nb_place_total, lien_pdf) VALUES ("PING 48.3", "Le ping 48.3 regroupe 3 élèves pur l'instant...", 6,"pdfs/nom_du_fichier.pdf");
INSERT INTO projet (titre, description, nb_place_total, lien_pdf) VALUES ("PING 48.4", "Le ping 48.4 regroupe 3 élèves pur l'instant...", 6,"pdfs/nom_du_fichier.pdf");
INSERT INTO projet (titre, description, nb_place_total, lien_pdf) VALUES ("PING 48.5", "Le ping 48.5 regroupe 3 élèves pur l'instant...", 6,"pdfs/nom_du_fichier.pdf");
INSERT INTO projet (titre, description, nb_place_total, lien_pdf) VALUES ("PING 48.6", "Le ping 48.6 regroupe 3 élèves pur l'instant...", 6,"pdfs/nom_du_fichier.pdf");